# WillEQ

A standalone EverQuest client targeting the Titanium client version (2006) with optional 3D graphics rendering. This client connects to EverQuest servers using the Titanium protocol and renders zones, characters, and UI elements using the Irrlicht engine with software rendering.

This is a mostly vibe-coded project at this point so the codebase is a bit chaotic. Expect major changes as features are implemented.

There's no character creation support yet so you'll have to use an existing account & character.

I'm developing this and doing all my testing running from a remote Ubuntu 24 server without a GPU and am using a local EQEmu instance (akk-stack). Video output is to Xvfb which is then exported with x11vnc. The docker and macos builds have not been fully tested.

The feature list below was generated by Claude and is way too optimistic. Nothing is 100% working. That said, I am currently able to log into my local server, zone in, and can do basic navigation in-zone and between zones.

## Features

- Full Titanium protocol implementation (login, world, zone servers)
- 3D zone rendering with textures, lighting, and fog
- Character and NPC model loading from original EQ assets
- First-person and third-person camera modes
- Chat system with channel filtering and clickable links
- Inventory management with item tooltips
- Combat system with auto-attack and targeting
- Door interaction
- Headless mode for bot/automation use cases

## Feature Comparison: Classic/Kunark/Velious Era (1999-2000)

This checklist targets the original EverQuest experience through the Velious expansion, before Luclin introduced major changes like new models and the AA system.

Overall completion: **~55%**

Legend: ✅ Complete | ⚠️ Partial | ❌ Not Implemented

### Connection & Authentication — 75%
| Feature | Status | Notes |
|---------|--------|-------|
| Login server authentication | ✅ | |
| Server selection | ✅ | |
| Character selection | ✅ | Auto-select from config |
| Character creation | ❌ | |

### World & Zones — 85%
| Feature | Status | Notes |
|---------|--------|-------|
| Zone loading | ✅ | S3D/WLD parsing |
| Zone geometry | ✅ | |
| Zone textures | ✅ | Including DXT |
| Zone lighting | ✅ | Static and dynamic |
| Zone fog | ✅ | |
| Day/night cycle | ✅ | |
| Weather (rain/snow) | ⚠️ | Receives data, no visuals |
| Zone transitions | ✅ | |
| Zone points | ✅ | |
| Boats/transport | ❌ | |

### Graphics — 75%
| Feature | Status | Notes |
|---------|--------|-------|
| Zone geometry | ✅ | |
| Classic character models | ✅ | All original races |
| NPC/mob models | ✅ | |
| Equipment display | ✅ | Weapons, shields, helms |
| Skeletal animation | ✅ | Walk, run, combat, etc. |
| Animated textures | ✅ | Water, lava, fire |
| Particle effects | ❌ | |
| Spell effects | ❌ | |

### Movement — 60%
| Feature | Status | Notes |
|---------|--------|-------|
| Walking/running | ✅ | With server sync |
| Strafing | ✅ | |
| Jumping | ❌ | |
| Swimming | ❌ | |
| Drowning | ❌ | |
| Levitation | ❌ | |
| Auto-run | ✅ | |
| Collision | ✅ | |

### Camera — 100%
| Feature | Status | Notes |
|---------|--------|-------|
| First-person | ✅ | |
| Third-person | ✅ | |
| Mouse look | ✅ | |

### Combat — 50%
| Feature | Status | Notes |
|---------|--------|-------|
| Targeting | ✅ | Click and /target |
| Auto-attack (melee) | ✅ | |
| Damage messages | ✅ | |
| HP tracking | ✅ | |
| Consider | ✅ | |
| Death/corpse | ✅ | |
| Corpse looting | ✅ | Items and money |
| Spell casting | ✅ | /cast, keys 1-8 |
| Combat abilities | ❌ | Kick, bash, taunt, etc. |
| Ranged combat | ❌ | Bows, throwing |
| Pet commands | ❌ | |
| Bind wound | ❌ | |

### Spells — 60%
| Feature | Status | Notes |
|---------|--------|-------|
| Spell book | ✅ | /spellbook |
| Memorize spells | ✅ | /mem, /forget |
| Cast spells | ✅ | /cast, keys 1-8, /interrupt |
| Spell effects | ❌ | Visual effects |
| Buff window | ❌ | |

### Chat — 100%
| Feature | Status | Notes |
|---------|--------|-------|
| Say | ✅ | |
| Shout | ✅ | |
| OOC | ✅ | |
| Auction | ✅ | |
| Group | ✅ | |
| Guild | ✅ | |
| Tell | ✅ | |
| Emote | ✅ | /emote |
| Reply | ✅ | /reply |
| Chat filtering | ✅ | /filter |

### UI Windows — 45%
| Feature | Status | Notes |
|---------|--------|-------|
| Chat window | ✅ | Scrollable, filterable |
| Inventory | ✅ | With equipment slots |
| Bags | ✅ | Container contents |
| Loot window | ✅ | |
| Item tooltips | ✅ | |
| Player HUD | ⚠️ | Basic HP/mana display |
| Target window | ⚠️ | Basic info only |
| Spell book | ✅ | /spellbook |
| Spell bar | ⚠️ | Keys 1-8, /gems |
| Hotbar | ❌ | |
| Group window | ✅ | HP/mana bars, G key |
| Compass | ❌ | |
| Consider window | ❌ | |
| Options | ❌ | |
| Trade window | ❌ | |
| Bank window | ❌ | |
| Merchant window | ❌ | |

### Inventory — 70%
| Feature | Status | Notes |
|---------|--------|-------|
| Item display | ✅ | Icons and names |
| Item stats | ✅ | |
| Move items | ✅ | Drag and drop |
| Container bags | ✅ | Up to 10-slot |
| Equipment slots | ✅ | |
| Loot items | ✅ | |
| Currency | ✅ | All denominations |
| Item linking | ❌ | |

### Social — 40%
| Feature | Status | Notes |
|---------|--------|-------|
| /who | ✅ | Local listing |
| /played | ❌ | |
| Friends list | ❌ | |
| Ignore list | ❌ | |
| Group invite | ✅ | /invite |
| Group management | ✅ | /disband, /decline, /follow |
| Guild management | ⚠️ | MOTD only |
| Trading | ❌ | |
| Inspect | ❌ | |

### NPC Interaction — 40%
| Feature | Status | Notes |
|---------|--------|-------|
| Doors | ✅ | Open/close sync |
| Hail NPC | ✅ | H key, /say Hail |
| Merchant buy/sell | ❌ | |
| Banker | ❌ | |
| Quest text | ❌ | |

### Skills — 5%
| Feature | Status | Notes |
|---------|--------|-------|
| Skill display | ⚠️ | Receives updates |
| Skill use | ❌ | |
| Tradeskills | ❌ | |
| Forage | ❌ | |
| Fishing | ❌ | |
| Tracking | ❌ | |
| Sense heading | ❌ | |

### Audio — 0%
| Feature | Status | Notes |
|---------|--------|-------|
| Music | ❌ | |
| Sound effects | ❌ | |
| Ambient sounds | ❌ | |

### Extras (Not in Original) — 80%
| Feature | Status | Notes |
|---------|--------|-------|
| Headless mode | ✅ | For automation |
| VNC support | ✅ | Remote display |
| Screenshots | ✅ | |
| Navmesh pathfinding | ✅ | Optional |
| Debug/admin mode | ✅ | |

## Requirements

### Required Dependencies
- libuv
- OpenSSL
- zlib
- fmt
- GLM (header-only)
- jsoncpp

### Optional Dependencies
- Boost - Waypoint pathfinding
- librecast-dev - Navmesh pathfinding (Recast/Detour)
- libirrlicht-dev, libxxf86vm-dev - 3D graphics rendering

### EverQuest Client Files
Requires a copy of the EverQuest Titanium Edition client for zone geometry, textures, and character models.

## Building

```bash
# Configure
mkdir -p build && cd build && cmake ..

# Build
cmake --build build

# Run tests
cd build && ctest --output-on-failure
```

The executable is output to `./build/bin/willeq`.

## Configuration

Create a configuration file (e.g., `willeq.json`):

```json
{
    "login_server": "login.server.com",
    "login_port": 5999,
    "username": "your_username",
    "password": "your_password",
    "server_name": "Server Name",
    "character_name": "CharacterName",
    "eq_client_path": "/path/to/EverQuest"
}
```

## Running

```bash
# With graphics
./build/bin/willeq -c willeq.json

# Headless (no graphics)
./build/bin/willeq -c willeq.json --no-graphics

# With VNC (for headless servers)
./scripts/start-with-vnc.sh -c willeq.json
# Connect via: vnc://localhost:5999
```

## Controls

### Renderer Modes

The client has two modes, toggled with **F9**:

- **Player Mode**: First-person gameplay with collision detection and server sync
- **Admin Mode**: Free-fly camera for debugging and inspection

### Key Bindings

**Both Modes:**
| Key | Action |
|-----|--------|
| WASD | Movement / Camera |
| F1 | Toggle wireframe |
| F2 | Toggle HUD |
| F3 | Toggle name tags |
| F5 | Cycle camera mode |
| F9 | Toggle Admin/Player mode |
| F12 | Screenshot |
| LMB+drag | Look around |
| Shift+ESC | Quit |

**Player Mode:**
| Key | Action |
|-----|--------|
| Q/E | Strafe |
| R / NumLock | Toggle autorun |
| 1-8 | Cast spell from gem slot |
| ` | Toggle auto-attack |
| I | Toggle inventory |
| G | Toggle group window |
| U | Interact with door |
| H | Hail target |
| C | Toggle collision |
| ESC | Clear target |
| Enter | Open chat input |
| / | Open chat with slash |

### Slash Commands

**Chat:**
```
/say, /shout, /ooc, /auction    Channel messages
/gsay, /gu                      Group/guild chat
/tell <name> <msg>              Private message
/reply                          Reply to last tell
/emote <text>                   Emote action
/filter [channel]               Toggle channel display
/timestamp                      Toggle chat timestamps
```

**Movement:**
```
/loc                            Show coordinates
/sit, /stand                    Sit/stand
/camp                           Sit and logout (30s)
/move <x> <y> <z>               Move to coordinates
/moveto <name>                  Move to entity
/follow <name>, /stopfollow     Follow entity
```

**Combat:**
```
/target <name>                  Target entity
/attack, /aa                    Toggle auto-attack
```

**Spells:**
```
/cast <gem#>                    Cast from gem slot (1-8)
/mem <gem#> <spell>             Memorize spell
/forget <gem#>                  Forget spell
/gems                           Show memorized spells
/interrupt                      Interrupt casting
/spellbook                      Open spellbook
```

**Group:**
```
/invite [name]                  Invite to group
/disband                        Leave group
/decline                        Decline group invite
```

**Utility:**
```
/who                            List nearby entities
/help [command]                 Show help
/debug <level>                  Set debug (0-6)
/quit                           Show exit options
/q                              Exit immediately
```

## Architecture

The client connects through three stages:
1. **Login Server** - Authentication and server list
2. **World Server** - Character selection
3. **Zone Server** - Gameplay

Key components:
- `EverQuest` - Main client class handling protocol and game state
- `IrrlichtRenderer` - 3D rendering with Irrlicht
- `EntityRenderer` - Character/NPC model management
- `RaceModelLoader` - Loads models from S3D archives
- `WindowManager` - UI window system
- `CombatManager` - Combat logic

## File Structure

```
src/
├── client/
│   ├── eq.cpp              # Main client logic
│   ├── combat.cpp          # Combat system
│   └── graphics/
│       ├── irrlicht_renderer.cpp
│       ├── entity_renderer.cpp
│       ├── eq/             # EQ file format loaders
│       └── ui/             # UI components
├── common/
│   └── net/                # Network protocol
include/
├── client/
└── common/
tests/
config/                     # User settings
```

## Credits

This project builds upon the work of several open-source projects:

- **[EQEmu](https://github.com/EQEmu/Server)** - EverQuest server emulator. Network protocol implementation and packet structures derived from EQEmu's extensive reverse-engineering work.
- **[LanternExtractor](https://github.com/LanternEQ/LanternExtractor)** - EQ asset extraction tool. Referenced for S3D/WLD file format parsing and zone geometry extraction.
- **[eqsage](https://github.com/xackery/eqsage)** - EQ asset viewer. Referenced for model loading and animation handling.
- **[eqrequiem](https://github.com/jamfestemq/eqrequiem)** - EQ client project. Referenced for Titanium protocol details and client behavior.

## License

This project is licensed under the GNU General Public License v3.0. See [LICENSE](LICENSE) for details.

EverQuest is a registered trademark of Daybreak Game Company LLC.
